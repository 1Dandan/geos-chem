REVISIONS (v6-01-05)  
bmy, 19 Mar 2004


New in v6-01-05:
-------------------------------------------------------------------------------

ls_k_rain		-- Now moved from being an internal routine w/in
("wetscav_mod.f")	   WETDEP to a module routine

ls_f_prime		-- Now moved from being an internal routine w/in
("wetscav_mod.f")	   WETDEP to a module routine

conv_f_prime		-- Now moved from being an internal routine w/in
("wetscav_mod.f")	   WETDEP to a module routine

safety			-- Now moved from being an internal routine w/in
("wetscav_mod.f")	   WETDEP to a module routine



Removed from v6-01-05:
-------------------------------------------------------------------------------




Changed from v6-01-04:
-------------------------------------------------------------------------------

arconvtran		-- Removed NSTEP from arg list; it's not used
("fvdas_convect_mod.f") -- Also zero arrays in order to prevent them from 
			   being filled with compiler junk for latitudes
			   where no convection occurs at all.

CMN_DIAG		-- Changed PD37 from 4 to 10

CMN_SIZE		-- LLTROP should be 17 for GEOS-4...based on the ND55 
			   diagnostic when computed for 2003 met fields

chem_tagged_ox		-- Bug fix: do not put call to function
("tagged_ox_mod.f")	   TIMESTAMP_STRING in WRITE statement

convtran		-- Added references to "diag_mod.f" and "grid_mod.f"
("fvdas_convect_mod.f") -- Also added TCVV and INDEXSOL as arguments
			-- Now only save LD38 levels of the ND38 diagnostic
			-- Now put NTRACE before Q on the arg list, since
		           NTRACE is needed to define Q and thus cannot
			   be listed first.

diag3.f			-- Now use actual tracer number for ND37 diagnostic
			-- Now loop over the actual # of soluble tracers for 
			   ND17, ND18. 

do_chemistry		-- Bug fix: added GEOS-4 to the #if block in the 
("chemistry_mod.f")	   call to OPTDEPTH.


do_convection		-- Added changes for GEOS-4/fvDAS convection
("convection_mod.f")	-- Also placed calls to DEBUG_MSG for debugging 
			   msg output.
			-- Only pass NTRACE elements of TCVV to FVDAS_CONVECT 
			   to prevent array out-of-bounds error for less than
                           NTRACE tracers

emisop.f		-- Now scale ISOP emissions to 400 Tg C/yr for GEOS-4

emisop_grass.f		-- Now scale ISOP emissions to 400 Tg C/yr for GEOS-4

emisop_mb.f             -- Now scale ISOP emissions to 400 Tg C/yr for GEOS-4

fast_j.f		-- Bug fix: PRES needs to be the true surface pressure
			   for GEOS-4, but PS-PTOP for all prior GEOS models. 

fvdas_convect		-- Added TCVV and INDEXSOL to the arg list and in the 
("fvdas_convect_mod.f")	   call to CONVTRAN.  
			-- Now perform convection in a loop over NSTEP 
			   iterations.  
			-- Added an OpenMP parallel loop over latitude.   
			-- Removed IL1G and IL2G, since these are no longer 
			   needed in this routine.
			-- Now put NTRACE before Q on the arg list, since
		           NTRACE is needed to define Q and thus cannot
			   be listed first.	

get_a6_fields		-- Now pass CLDTOPS to routine READ_A6 for GEOS-4
("a6_read_mod.f")

get_regional_pox	-- For GEOS-4, convert PBL from [m] to [hPa]
("tagged_ox_mod.f")	   w/ the barometric law.
			-- Now references SCALE_HEIGHT from "CMN_GCTM". 

init_fvdas_convect	-- Now compute HYPI in a more efficient way
("fvdas_convect_mod.f")

lightning.f		-- Scale GEOS-4 lightning NOx to 6 Tg N/yr 

lightdist.f		-- Bug fix: add GEOS_4 to the #if block

ndxx_setup.f		-- Now use GET_WETDEP_NMAX to get max # of soluble 
			   tracers for ND37, ND18, and ND19.  
			-- Also set NFAM=NTRACE+5 for Tagged CO simulation

nfcldmx			-- Make sure that K does not go out of bounds
("convection_mod.f")	   for ND38 diagnostic
			-- Now make F a 4-D array, so we don't have to hold 
			   it PRIVATE.  This prevents memory problems on the 
			   Altix 

ocean_source_acet       -- Scale the ocean source to Jacob et al 2002 for 
("acetone_mod.f")          GEOS-4.  
			-- Also account for surface area ratio for all 
			   GEOS grids.

open_a3_fields		-- Now skips past the GEOS-4 ident string
("a3_read_mod.f")

open_a6_fields		-- Now skips past the GEOS-4 ident string
("a3_read_mod.f")

open_i6_fields		-- Now skips past the GEOS-4 ident string
("a3_read_mod.f")

open_phis_fields	-- Now skips past the GEOS-4 ident string
("a3_read_mod.f")

read_a6			-- Now pass CLDTOPS to READ_A6 for GEOS-4
("a6_read_mod.f")

setup_co_oh_chem	-- Bug fix: added GEOS-4 to the #if block in the 
("main.f")		   call to OPTDEPTH.

srcdms			-- For GEOS-4, convert PBL from [m] to [hPa]
("sulfate_mod.f")	   w/ the barometric law.
			-- Now references SCALE_HEIGHT from "CMN_GCTM". 
			-- Added BLTHIK variable for PBL thickness in [hPa].

srcnh3			-- For GEOS-4, convert PBL from [m] to [hPa]
("sulfate_mod.f")	   w/ the barometric law.
			-- Now references SCALE_HEIGHT from "CMN_GCTM". 
			-- Added BLTHIK variable for PBL thickness in [hPa].

srcso2			-- For GEOS-4, convert PBL from [m] to [hPa]
("sulfate_mod.f")	   w/ the barometric law.
			-- Now references SCALE_HEIGHT from "CMN_GCTM". 
			-- Added BLTHIK variable for PBL thickness in [hPa].

srcso4			-- For GEOS-4, convert PBL from [m] to [hPa] w/ 
("sulfate_mod.f")	   w/ the barometric law.
			-- Now references SCALE_HEIGHT from "CMN_GCTM". 
			-- Added BLTHIK variable for PBL thickness in [hPa].

tpcore_window		-- Commented out call to FLUSH(6)
("tpcore_window_mod.f")
     
upbdflx_o3		-- Added GEOS-4 to the #if block where the 
("upbdflx_mod.f")	   mixing ratio of Ozone is defined

wetdep			-- Now parallelize over outermost J-loop.  
("wetscav_mod.f")	-- Also move internal routines LS_K_RAIN, LS_F_PRIME, 
	  		   CONV_F_PRIME, and SAFETY to the module, since we 
			   cannot call internal routines from w/in a parallel
			   loop. 

whenfgt			-- Updated comments
("fvdas_convect_mod.f") -- Now use F90-style declarations.

write_diag51		-- Bug fix: GMNL should be NL for tracer #39, not 1
("diag51_mod.f")

---
a3_read_mod.f		<-- Removed obsolete, commented-out code
a6_read_mod.f		    from the following routines
diag_mod.f
drydep_mod.f
emisop.f
emisop_grass.f
i6_read_mod.f
main.f		      
phis_read_mod.f
